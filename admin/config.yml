## Comment out when doing local development
backend:
  name: github
  repo: gcerc/site
  base_url: https://pages.cloud.gov
  auth_endpoint: external/auth/github
  preview_context: pages/build
  branch: bh-cms-updates
  use_graphql: true

##
## Uncomment when doing local development on Netlify CMS
## Run `npx netlify-cms-proxy-server` to start working locally
## In another terminal, start the app with `npm start`
## See https://www.netlifycms.org/docs/beta-features/#working-with-a-local-git-repository
##

# backend:
#   name: git-gateway
# local_backend: true

media_folder: img
public_folder: /img
publish_mode: editorial_workflow
logo_url: https://pages.cloud.gov/images/logos/pages-logo-blue.svg

editor:
  preview: false

collections:
  - name: "announcements"
    label: "Announcements"
    folder: "collections/announcements"
    create: true
    editor:
      preview: false
    slug: "{{date}}-{{slug}}"
    summary: "[{{date}}] {{title}}"
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - {
          label: "Created",
          name: "date",
          date_format: "YYYY-MM-DD",
          default: "{{now}}",
          widget: "datetime",
        }
      - { label: "Body", name: "body", widget: "markdown" }
  - name: "media"
    label: "Media Gallery"
    folder: "collections/media"
    create: true
    editor:
      preview: false
    slug: "{{slug}}"
    summary: "{{title}}"
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - {
          label: "Created",
          name: "date",
          date_format: "YYYY-MM-DD",
          default: "{{now}}",
          widget: "datetime",
        }
      - {
          label: "Vimeo ID",
          name: "vimeoId",
          widget: "string",
          hint: "The numeric ID from the Vimeo URL (e.g. https://vimeo.com/123456789 -> 123456789)",
        }
      - {
          label: "Description",
          name: "description",
          widget: "text",
          hint: "Short teaser shown on the gallery card.",
          required: false,
        }
      - {
          label: "Thumbnail",
          name: "thumbnail",
          widget: "image",
          required: true,
          hint: "Upload a thumbnail image for this video.",
          allow_multiple: false,
          choose_url: false,
        }
      - {
          label: "Thumbnail Alt Text",
          name: "thumbnail_alt",
          widget: "string",
          required: false,
          hint: "Describe the thumbnail image for accessibility.",
        }
      - {
          label: "Video Caption",
          name: "video_caption",
          widget: "string",
          required: false,
          hint: "Optional caption displayed under the player.",
        }
      - {
          label: "Aspect Ratio",
          name: "aspect_ratio",
          widget: "string",
          required: false,
          default: "16/9",
          hint: "Format like 16/9 to control the embed aspect ratio.",
        }
      - {
          label: "Autoplay",
          name: "autoplay",
          widget: "boolean",
          default: false,
          required: false,
        }
      - {
          label: "Muted",
          name: "muted",
          widget: "boolean",
          default: false,
          required: false,
        }
      - {
          label: "Loop",
          name: "loop",
          widget: "boolean",
          default: false,
          required: false,
        }
      - {
          label: "Plays Inline",
          name: "playsinline",
          widget: "boolean",
          default: false,
          required: false,
        }
      - { label: "Body", name: "body", widget: "markdown", required: false }
  - label: "Pages"
    name: "pages"
    folder: "pages"
    create: true
    nested:
      depth: 10
      subfolders: false
    filter:
      field: "cms"
      value: true
    meta: { path: { widget: string, label: "Path", index_file: "index" } }
    fields:
      - { label: "Title", name: "title", widget: "string" }
      - {
          label: "Permalink",
          name: "permalink",
          widget: "string",
          required: false,
          hint: "Optional: override the generated URL (e.g. /custom/path/).",
        }
      - {
          label: "Redirect From",
          name: "redirect_from",
          widget: "list",
          required: false,
          hint: "Add any legacy paths that should redirect here (e.g. /old-page/).",
        }
      - {
          label: "Lead",
          name: "lead",
          widget: "text",
          required: false,
          hint: "Optional summary that appears below the heading on some layouts.",
        }
      - {
          label: "Layout",
          name: "layout",
          widget: "string",
          required: false,
          hint: "Optional layout override (e.g. layouts/base).",
        }
      - label: "Eleventy Navigation"
        name: "eleventyNavigation"
        widget: "object"
        required: false
        collapsed: false
        fields:
          - {
              label: "Key",
              name: "key",
              widget: "string",
              hint: "Unique ID for this page in the navigation tree.",
            }
          - {
              label: "Parent",
              name: "parent",
              widget: "string",
              required: false,
              hint: "Optional parent key to nest this page in the nav.",
            }
          - {
              label: "Title",
              name: "title",
              widget: "string",
              required: false,
              hint: "Override the nav label (defaults to the page title if omitted).",
            }
          - {
              label: "Order",
              name: "order",
              widget: "number",
              value_type: "int",
              required: false,
              hint: "Lower numbers appear first within the same nav level.",
            }
      - { label: "Body", name: "body", widget: "markdown" }
  - label: "Council Members"
    name: "members"
    files:
      - label: "Members"
        name: "about"
        file: "pages/who-we-are/council-members.md"
        fields:
          - label: Members
            name: members
            widget: list
            fields:
              - { label: Name, name: name, widget: string }
              - { label: Agency, name: agency, widget: string }
              - { label: Title, name: title, widget: string }
              - label: "Photo"
                name: "photo"
                widget: "image"
                allow_multiple: false
                choose_url: false
                required: false
              - label: "Delegates"
                name: "delegates"
                widget: "list"
                fields:
                  - label: "Type"
                    name: "type"
                    widget: "select"
                    options: ["Designee", "Representative", "Alternate"]
                  - { label: Name, name: name, widget: string }
                  - {
                      label: Agency,
                      name: agency,
                      widget: string,
                      required: false,
                    }
                  - {
                      label: Title,
                      name: title,
                      widget: string,
                      required: false,
                    }
